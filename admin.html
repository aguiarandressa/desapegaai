<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin â€” DesapegaAi</title>

  <!-- ðŸ” ProteÃ§Ã£o simples (MVP) -->
  <script>
    (function () {
      const senhaCorreta = "@dmin123";
      if (!sessionStorage.getItem("admin_ok")) {
        const senha = prompt("Digite a senha do painel administrativo:");
        if (senha !== senhaCorreta) {
          alert("Senha incorreta.");
          location.href = "index.html";
        } else {
          sessionStorage.setItem("admin_ok", "true");
        }
      }
    })();
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="css/admin.css" />
</head>

<body>
<div class="container">

  <!-- =========================
       TOPO
  ========================== -->
  <header class="admin-header">
    <h1>Admin â€” DesapegaAi</h1>
    <div class="header-actions">
      <button id="btnReload">Recarregar</button>
      <button id="btnLogout">Sair</button>
    </div>
  </header>

  <!-- =========================
       PRODUTOS
  ========================== -->
  <section class="card">

    <div class="tabs">
      <button id="tabProdutoForm" class="active">Cadastrar / Editar</button>
      <button id="tabProdutoList">Lista</button>
    </_toggle_tabs>

    <!-- FORM PRODUTO -->
    <div id="produtoFormWrap">

      <h2 id="modoTexto">Novo produto</h2>
      <div>ID: <span id="produtoIdTexto">â€”</span></div>

      <input id="p_nome" placeholder="Nome do produto *" />
      <input id="p_preco" type="number" placeholder="PreÃ§o (R$) *" />
      <textarea id="p_descricao" placeholder="DescriÃ§Ã£o"></textarea>

      <select id="p_categoria"></select>

      <select id="p_ativo">
        <option value="true">Ativo</option>
        <option value="false">Inativo</option>
      </select>

      <select id="p_dona"></select>
      <select id="p_condominio"></select>

      <input id="p_imagem" type="file" accept="image/*" />
      <img id="p_preview" style="display:none;max-width:150px" />
      <div id="p_preview_text">Nenhuma imagem selecionada.</div>

    <button id="btnSalvarProduto" class="green">
  Publicar produto
</button>

      <button id="btnLimparProduto" type="button">Limpar</button>

      <div id="msgProduto" class="msg"></div>
    </div>

    <!-- LISTA PRODUTOS -->
    <div id="produtoListWrap" style="display:none">

      <div class="filters">
        <input id="q_busca" placeholder="Buscar..." />
        <select id="q_status">
          <option value="all">Todos</option>
          <option value="true">Ativos</option>
          <option value="false">Inativos</option>
        </select>
        <select id="q_cat"></select>
        <select id="q_cond"></select>

        <button id="btnAplicarFiltros">Aplicar</button>
        <button id="btnLimparFiltros">Limpar</button>
      </div>

      <div id="contagemProdutos"></div>
      <div id="listaProdutos"></div>
      <div id="msgListaProdutos" class="msg"></div>
    </div>

  </section>

  <!-- =========================
       BASE (DONAS / CONDOMÃNIOS)
  ========================== -->
  <section class="card">

    <div class="tabs">
      <button id="tabDonas" class="active">Donas</button>
      <button id="tabConds">CondomÃ­nios</button>
    </div>

    <!-- DONAS -->
    <div id="donasWrap">

      <input id="d_nome" placeholder="Nome da dona *" />
      <input id="d_whats" placeholder="WhatsApp (55 + DDD + nÃºmero) *" />
      <button id="btnAddDona">Cadastrar dona</button>

      <div id="msgDona" class="msg"></div>
      <div id="listaDonas"></div>
    </div>

    <!-- CONDOMÃNIOS -->
    <div id="condsWrap" style="display:none">

      <input id="c_nome" placeholder="Nome do condomÃ­nio *" />
      <button id="btnAddCond">Cadastrar condomÃ­nio</button>

      <div id="msgCond" class="msg"></div>
      <div id="listaConds"></div>
    </div>

  </section>

</div>

<!-- Supabase (carrega 1 vez sÃ³) -->
<script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- CONFIG (sempre primeiro) -->
<script defer src="js/config.js"></script>

<!-- HELPERS -->
<script defer src="js/helpers.js"></script>

<!-- UI -->
<script defer src="js/admin-ui.js"></script>

<!-- CRUDs -->
<script defer src="js/admin-donas.js"></script>
<script defer src="js/admin-condominios.js"></script>
<script defer src="js/admin-produtos.js"></script>

<!-- INIT (sempre por Ãºltimo) -->
<script defer src="js/admin-init.js"></script>


</body>
</html>
